## schema.init.sql:

Хорошо бы переделать на PHP миграцию, но тут не указан фреймворк так что это просто заметка на будущее.

id и uuid имеет одну и ту же функцию - идентификатор продукта, поэтому можно оставить только одно поле.
uuid более секьюрный и имеет больше вариантов использования поэтому оставляем только его.
uuid имеет фиксированную длину, поэтому можно сделать PRIMARY KEY (uuid(36))

для булева поля is_activate можно добавить проверку на значения 0 и 1

поле name иммет комментарий тип услуги так что оно должно называться service_type
тип text с дефолтным значением вызовет ошибку mysql и я не думаю что ему нужен размер text, так
что должно быть varchar(255)

поле price должно быть числом с фиксированной точкой а не плавающей иначе оно накопит ошибки округления при операциях
так что его тип decimal(10, 2)

добавил еще поля created_at и updated_at

## везде:

применил php-cs в конце

## AddToCartController:

добавил strict_types=1
сделал класс final
сделал контроллера инвокабл так как он рассчитан на один метод
убрал бизнес логику из контроллера и перенес ее в сервис CartManager
добавил обработку исключений

## GetCartController:

сделал класс final
сделал контроллера инвокабл так как он рассчитан на один метод
добавил обработку исключений

## GetProductsController:

сделал класс final
сделал контроллера инвокабл так как он рассчитан на один метод
добавил обработку исключений

## CartItem:

поменял поля public на private

## CartNotFoundException:

добавил новое исключение

## ProductNotFoundException:

добавил новое исключение

## CartTransportException:

переименовал ConnectorException
и поменял на наследование Exception, имплементировать Throwable нельзя, появляется ошибка

## CartView:

добавил final
убрал id
переименовал name в service_type

## CartView:

добавил final
убрал id

## CartTransportInterface:

добавил интерфейс для механизма корзины

## CartTransport:

переписал весь Connector и ConnectorFacade для работы через dependency injection
добавил много проверок десиариализации, исключений для взаимодействия с Redis

## ProductRepository:

исправил sql инъекции в getByUuid и getByCategory
исправил метод в getByUuid на fetchAssociative
убрал static в array_map чтобы иметь доступ к $this->make
убрал id
переименовал name в service_type
сделал make private
добавил исключение ProductNotFoundException
сделал final

## CartRepository:

добавил класс репозитория чтобы сервис CartManager работал с репозиторием а не уровнем ниже

## CartManager:

перенес с сервисы
сделал final
добавил метод addToCart
убрал связь с Connector как нижестоящим слоем
добавил зависимости от репозиториев и сервиса SessionService

## SessionService:

добавил сервис для работы с сессиями

## CartView:

$total это куммулятивная сумма а не сумма для предмета

## ExceptionSubscriber

для логирования добавил подписку на исключения как будто это симфони, можно еще мидлваре сделать, зависит от фреймворка
